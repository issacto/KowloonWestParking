(this["webpackJsonpreact-parking"]=this["webpackJsonpreact-parking"]||[]).push([[0],{38:function(e,t,n){},60:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n.n(c),r=n(8),s=n.n(r),a=(n(38),n(6)),o=n.n(a),l=n(12),d=n(2),h=n(14),j=n.n(h),p=n(17),b=n.n(p),u=n.p+"static/media/clicking.f03a1f91.svg",g=(n.p,n(1)),v={paddingTop:"1vh",paddingLeft:"1vh",paddingRight:"1vh",overflowY:"auto",height:"71vh",minHeight:"71vh"},O={justifyContent:"center",textAlign:"center",paddingTop:"2vh",backgroundColor:"#434343 ",border:"solid 1px cyan",width:"100%",height:"6vh"},x={backgroundColor:"#26323c",borderRadius:"50%"},f={textAlign:"right",marginRight:"1vh",marginBottom:"1vh"},y={backgroundColor:"#26323c",border:"1px solid cyan",borderRadius:"0.5vh",color:"white",fontSize:"2vh",padding:"0.8vh"},m=function(e){return"cyan"==e?{width:"80%",border:"3px solid cyan",padding:"1vh",borderRadius:"1vh",backgroundColor:"#434343",paddingLeft:"4vh",paddingTop:"1vh",fontSize:"2.5vh",marginBottom:"3vh"}:{width:"80%",border:"3px solid lightseagreen",padding:"1vh",borderRadius:"1vh",backgroundColor:"#434343",paddingLeft:"4vh",paddingTop:"1vh",fontSize:"2.5vh",marginBottom:"3vh"}},C={fontSize:"2.5vh",display:"inline"},k={marginBottom:"4vh"},S=function(e){var t=e.data,n=e.detailsMap,c=function(t,c,i){var r=n.filter((function(e){return e._id==t}))[0],s=0;s+=(i.privateCar?i.privateCar.vacancy:0)+(i.motorCycle?i.motorCycle.vacancy:0)+(i.HGV?i.HGV.vacancy:0)+(i.LGV?i.LGV.vacancy:0),console.log(s);var a="cyan";s<100&&(a="lightseagreen");var o=Object(g.jsxs)("div",{style:k,children:[Object(g.jsxs)("p",{style:C,children:[r.name," \uff5c"]}),Object(g.jsxs)("p",{style:{display:"inline",color:a},children:["\u8eca\u4f4d\uff1a",s]})]}),l=c.split("T"),d=l[0],h=l[1].split(":"),j=d+" "+h[0]+":"+h[1];return Object(g.jsx)("div",{children:Object(g.jsx)(b.a,{trigger:o,children:Object(g.jsxs)("div",{style:m(a),children:[Object(g.jsxs)(b.a,{trigger:Object(g.jsxs)("div",{children:[Object(g.jsx)("p",{style:{marginBottom:"0",display:"inline"},children:"\u505c\u8eca\u5834\u8a73\u7d30\u8cc7\u6599"}),Object(g.jsx)("img",{src:u,width:"30vh",style:x})]}),children:[Object(g.jsx)("p",{children:r.nature?"\u3002\u63d0\u4f9b\u8005: "+r.nature:null}),Object(g.jsx)("p",{children:r.type?"\u3002\u985e\u5225: "+r.type:null}),Object(g.jsx)("p",{children:r.openingHours?"\u3002\u958b\u59cb\u6642\u9593: "+r.openingHours[0].periodStart:null}),Object(g.jsx)("p",{children:r.openingHours?"\u3002\u7d50\u675f\u6642\u9593: "+r.openingHours[0].periodEnd:null})]}),Object(g.jsxs)("p",{children:[i.privateCar?"\u3002\u79c1\u5bb6\u8eca: "+i.privateCar.vacancy:null," "]}),Object(g.jsxs)("p",{children:[i.motorCycle?"\u3002\u96fb\u55ae\u8eca: "+i.motorCycle.vacancy:null," "]}),Object(g.jsxs)("p",{children:[i.HGV?"\u3002\u91cd\u578b\u8ca8\u8eca: "+i.HGV.vacancy:null," "]}),Object(g.jsxs)("p",{children:[i.LGV?"\u3002\u8f15\u578b\u8ca8\u8eca: "+i.LGV.vacancy:null," "]}),Object(g.jsxs)("p",{style:{fontSize:"2vh"},children:["\u3002\u66f4\u65b0\u6642\u9593: ",j]}),Object(g.jsx)("div",{style:f,children:Object(g.jsx)("button",{style:y,onClick:function(){e.changeCenter([r.coordinates[1],r.coordinates[0]]),e.changeZoom(24)},children:"\u986f\u793a\u5728\u5730\u5716\u4e0a"})})]})})})};return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{style:O,children:Object(g.jsxs)("h2",{style:{display:"inline",marginBottom:"0.3vh"},children:["\u505c\u8eca\u5834 "," "]})}),Object(g.jsx)("div",{style:v,children:Object(g.jsx)("ul",{children:t?t.results.map((function(e){return Object(g.jsxs)("li",{children:[" ",c(e._id,e.lastUploadDate,e)]},e._id)})):null})})]})},w=n(75),z=n(76),T=n(77),V=n(78),G=n(79),H=n(5),L=(n(59),n(60),n(30)),B=n(31),R=H.icon({iconUrl:L.a,shadowUrl:B.a});H.Marker.prototype.options.icon=R;var W={fontSize:"2vh"},F=function(e){console.log(e.data);var t=e.data,n=e.detailsMap,i=Object(c.useState)(e.center),r=Object(d.a)(i,2),s=r[0],a=r[1],h=Object(c.useState)(e.zoom),j=Object(d.a)(h,2),p=j[0],b=j[1];function u(){var e=Object(w.a)();return console.log(p),e.setView(s,p),null}Object(c.useEffect)(Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(e.center),a(e.center);case 2:case"end":return t.stop()}}),t)}))),[e.center]),Object(c.useEffect)(Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(e.zoom),b(e.zoom);case 2:case"end":return t.stop()}}),t)}))),[e.zoom]);var v=function(e,t,c){var i=n.filter((function(t){return t._id==e}))[0],r=Object(g.jsx)("p",{children:i.name}),s=[i.coordinates[1],i.coordinates[0]],a=t.split("T"),o=a[0],l=a[1].split(":"),d=o+" "+l[0]+":"+l[1];return Object(g.jsx)(z.a,{position:s,children:Object(g.jsx)(T.a,{children:Object(g.jsxs)("div",{style:W,children:[Object(g.jsx)("p",{style:{fontSize:"3vh"},children:r}),Object(g.jsxs)("p",{children:[c.privateCar?"\u3002\u79c1\u5bb6\u8eca: "+c.privateCar.vacancy:null," "]}),Object(g.jsxs)("p",{children:[c.motorCycle?"\u3002\u96fb\u55ae\u8eca:  "+c.motorCycle.vacancy:null," "]}),Object(g.jsxs)("p",{children:[c.HGV?"\u3002\u91cd\u578b\u8ca8\u8eca:"+c.HGV.vacancy:null," "]}),Object(g.jsxs)("p",{children:[c.LGV?"\u3002\u8f15\u578b\u8ca8\u8eca: "+c.LGV.vacancy:null," "]}),Object(g.jsxs)("p",{children:["\u3002\u66f4\u65b0\u6642\u9593:"," ",d]})]})})})};return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(V.a,{center:s,zoom:13,scrollWheelZoom:!1,children:[Object(g.jsx)(G.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t?t.results.map((function(e){return Object(g.jsx)("div",{children:v(e._id,e.lastUploadDate,e)})})):null,Object(g.jsx)(u,{})]})})},M={justifyContent:"center",alignItems:"center",textAlign:"center",marginTop:"4.7vh",fontSize:"1.7vh",fontStyle:"italic"},A=function(){return Object(g.jsxs)("div",{style:M,children:[Object(g.jsx)("a",{href:"https://data.gov.hk/en/",children:Object(g.jsxs)("p",{style:{color:"grey"},children:["Data@DATA.GOV.HK ","  "]})}),Object(g.jsx)("a",{href:"https://github.com/issacto",children:Object(g.jsx)("p",{style:{color:"grey",display:"inline"},children:"Copyright@IssacTo "})})]})},D=n.p+"static/media/icon.dbbd9805.svg",E=n(32),_=n.n(E),I={color:"white",fontFamily:"-apple-system, Roboto, sans-serif, serif",backgroundColor:"#29323c",height:"100%",minWidth:"99.5%",maxWidth:"99.5%",padding:5},U={display:"flex",justifyContent:"space-between",margin:"2vh"},P={backgroundColor:"#26323c",border:"1px solid cyan",borderRadius:"1vh",color:"aliceblue",fontSize:"3vh"},Z={margin:"2vh",textAlign:"right",display:"flex",justifyContent:"space-between"},J={display:"flex",flexDirection:"row",border:"5px solid lightseagreen",minHeight:"80vh"},K={width:"6vh",marginTop:"2.5vh",marginRight:"2.5vh"},Y={minWidth:"70%",maxWidth:"70%",justifyContent:"center",marginTop:"auto",marginBottom:"auto"},q={minWidth:"30%",maxWidth:"30%",borderLeft:"3px solid lightseagreen",fontSize:"2.3vh",backgroundColor:"#20323c"},N=function(){var e=Object(c.useState)({results:[]}),t=Object(d.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)(""),s=Object(d.a)(r,2),a=s[0],h=s[1],p=Object(c.useState)(!1),b=Object(d.a)(p,2),u=b[0],v=b[1],O=Object(c.useState)([22.31833206,114.209832494]),x=Object(d.a)(O,2),f=x[0],y=x[1],m=Object(c.useState)(14),C=Object(d.a)(m,2),k=C[0],w=C[1],z=Object(c.useState)(!0),T=Object(d.a)(z,2),V=T[0],G=T[1];Object(c.useEffect)(Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j()("https://sps-opendata.pilotsmartke.gov.hk/rest/getCarparkVacancies");case 2:return t=e.sent,e.next=5,j()(" https://sps-opendata.pilotsmartke.gov.hk/rest/getCarparkInfos?lang=zh_TW");case 5:n=e.sent,h(n.data.results),i(t.data),v(!0);case 9:case"end":return e.stop()}}),e)}))),[]),Object(c.useEffect)((function(){setTimeout((function(){G(!V)}),2500)}),[]);if("undefined"!==typeof window)return Object(g.jsxs)("div",{style:I,children:[Object(g.jsxs)("div",{style:U,children:[Object(g.jsx)("h1",{style:{fontSize:"5vh"},children:"\u4e5d\u9f8d\u897f\u505c\u8eca\u5834\u5373\u6642\u6578\u64da\u5eab\ud83c\udded\ud83c\uddf0"}),Object(g.jsx)("div",{children:Object(g.jsx)("a",{href:"https://issacto.github.io/KowloonWestParking",children:Object(g.jsx)("img",{style:K,src:D})})})]}),Object(g.jsx)(_.a,{active:V,spinner:!0,text:"\u8f09\u5165\u7db2\u7ad9\u4e2d",children:Object(g.jsxs)("div",{style:J,children:[Object(g.jsxs)("div",{style:Y,children:[Object(g.jsx)(F,{data:n,zoom:k,detailsMap:a,center:f}),Object(g.jsxs)("div",{style:Z,children:[Object(g.jsxs)("p",{style:{fontStyle:"italic",color:"grey"},children:["(lat: "+f[0]," long: "+f[1],",",k+") "]}),Object(g.jsx)("button",{style:P,onClick:function(){y([22.31833206,114.209832494]),w(14)},children:"\u5b8f\u89c0"})]})]}),u?Object(g.jsx)("div",{style:q,children:Object(g.jsx)(S,{data:n,detailsMap:a,changeCenter:y,changeZoom:w})}):null]})}),Object(g.jsx)(A,{})]})},Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,80)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),i(e),r(e),s(e)}))};s.a.render(Object(g.jsx)(i.a.StrictMode,{children:Object(g.jsx)(N,{})}),document.getElementById("root")),Q()}},[[73,1,2]]]);
//# sourceMappingURL=main.f9d535d0.chunk.js.map