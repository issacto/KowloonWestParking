(this["webpackJsonpreact-parking"]=this["webpackJsonpreact-parking"]||[]).push([[0],{38:function(e,t,n){},60:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),i=n(8),s=n.n(i),a=(n(38),n(6)),o=n.n(a),l=n(12),d=n(2),h=n(14),j=n.n(h),p=n(17),b=n.n(p),u=n(1),g={paddingTop:"1vh",paddingLeft:"1vh",paddingRight:"1vh",overflowY:"auto",height:"71vh",minHeight:"71vh"},v={justifyContent:"center",textAlign:"center",backgroundColor:"#434343 ",border:"solid 1px cyan",width:"100%"},O={textAlign:"right",marginRight:"1vh",marginBottom:"1vh"},x={backgroundColor:"#26323c",border:"1px solid cyan",borderRadius:"0.5vh",color:"white",fontSize:"2vh",padding:"0.8vh"},f=function(e){return"cyan"==e?{width:"80%",border:"3px solid cyan",padding:"1vh",borderRadius:"1vh",backgroundColor:"#434343",paddingLeft:"4vh",paddingTop:"1vh",fontSize:"2.5vh",marginBottom:"3vh"}:{width:"80%",border:"3px solid lightseagreen",padding:"1vh",borderRadius:"1vh",backgroundColor:"#434343",paddingLeft:"4vh",paddingTop:"1vh",fontSize:"2.5vh",marginBottom:"3vh"}},y={fontSize:"2.5vh",display:"inline"},m={marginBottom:"4vh"},C=function(e){var t=e.data,n=e.detailsMap,c=function(t,c,r){var i=n.filter((function(e){return e._id==t}))[0],s=0;s+=(r.privateCar?r.privateCar.vacancy:0)+(r.motorCycle?r.motorCycle.vacancy:0)+(r.HGV?r.HGV.vacancy:0)+(r.LGV?r.LGV.vacancy:0),console.log(s);var a="cyan";s<100&&(a="lightseagreen");var o=Object(u.jsxs)("div",{style:m,children:[Object(u.jsxs)("p",{style:y,children:[i.name," \uff5c"]}),Object(u.jsxs)("p",{style:{display:"inline",color:a},children:["\u8eca\u4f4d\uff1a",s]})]}),l=c.split("T"),d=l[0],h=l[1].split(":"),j=d+" "+h[0]+":"+h[1];return Object(u.jsx)("div",{children:Object(u.jsx)(b.a,{trigger:o,children:Object(u.jsxs)("div",{style:f(a),children:[Object(u.jsxs)(b.a,{trigger:Object(u.jsxs)("p",{style:{marginBottom:"0"},children:[">> ","\u505c\u8eca\u5834\u8a73\u7d30\u8cc7\u6599"]}),children:[Object(u.jsx)("p",{children:i.nature?"\u3002\u63d0\u4f9b\u8005: "+i.nature:null}),Object(u.jsx)("p",{children:i.type?"\u3002\u985e\u5225: "+i.type:null}),Object(u.jsx)("p",{children:i.openingHours?"\u3002\u958b\u59cb\u6642\u9593: "+i.openingHours[0].periodStart:null}),Object(u.jsx)("p",{children:i.openingHours?"\u3002\u7d50\u675f\u6642\u9593: "+i.openingHours[0].periodEnd:null})]}),Object(u.jsxs)("p",{children:[r.privateCar?"\u3002\u79c1\u5bb6\u8eca: "+r.privateCar.vacancy:null," "]}),Object(u.jsxs)("p",{children:[r.motorCycle?"\u3002\u96fb\u55ae\u8eca: "+r.motorCycle.vacancy:null," "]}),Object(u.jsxs)("p",{children:[r.HGV?"\u3002\u91cd\u578b\u8ca8\u8eca: "+r.HGV.vacancy:null," "]}),Object(u.jsxs)("p",{children:[r.LGV?"\u3002\u8f15\u578b\u8ca8\u8eca: "+r.LGV.vacancy:null," "]}),Object(u.jsxs)("p",{style:{fontSize:"2vh"},children:["\u3002\u66f4\u65b0\u6642\u9593: ",j]}),Object(u.jsx)("div",{style:O,children:Object(u.jsx)("button",{style:x,onClick:function(){e.changeCenter([i.coordinates[1],i.coordinates[0]]),e.changeZoom(24)},children:"\u986f\u793a\u5728\u5730\u5716\u4e0a"})})]})})})};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{style:v,children:Object(u.jsx)("h2",{children:"\u53c3\u8207\u7684\u505c\u8eca\u5834"})}),Object(u.jsx)("div",{style:g,children:Object(u.jsx)("ul",{children:t?t.results.map((function(e){return Object(u.jsxs)("li",{children:[" ",c(e._id,e.lastUploadDate,e)]},e._id)})):null})})]})},k=n(75),S=n(76),w=n(77),z=n(78),V=n(79),T=n(5),G=(n(59),n(60),n(30)),H=n(31),L=T.icon({iconUrl:G.a,shadowUrl:H.a});T.Marker.prototype.options.icon=L;var W={fontSize:"2vh"},B=function(e){console.log(e.data);var t=e.data,n=e.detailsMap,r=Object(c.useState)(e.center),i=Object(d.a)(r,2),s=i[0],a=i[1],h=Object(c.useState)(e.zoom),j=Object(d.a)(h,2),p=j[0],b=j[1];function g(){var e=Object(k.a)();return console.log(p),e.setView(s,p),null}Object(c.useEffect)(Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(e.center),a(e.center);case 2:case"end":return t.stop()}}),t)}))),[e.center]),Object(c.useEffect)(Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(e.zoom),b(e.zoom);case 2:case"end":return t.stop()}}),t)}))),[e.zoom]);var v=function(e,t,c){var r=n.filter((function(t){return t._id==e}))[0],i=Object(u.jsx)("p",{children:r.name}),s=[r.coordinates[1],r.coordinates[0]],a=t.split("T"),o=a[0],l=a[1].split(":"),d=o+" "+l[0]+":"+l[1];return Object(u.jsx)(S.a,{position:s,children:Object(u.jsx)(w.a,{children:Object(u.jsxs)("div",{style:W,children:[Object(u.jsx)("p",{style:{fontSize:"3vh"},children:i}),Object(u.jsxs)("p",{children:[c.privateCar?"\u3002\u79c1\u5bb6\u8eca: "+c.privateCar.vacancy:null," "]}),Object(u.jsxs)("p",{children:[c.motorCycle?"\u3002\u96fb\u55ae\u8eca:  "+c.motorCycle.vacancy:null," "]}),Object(u.jsxs)("p",{children:[c.HGV?"\u3002\u91cd\u578b\u8ca8\u8eca:"+c.HGV.vacancy:null," "]}),Object(u.jsxs)("p",{children:[c.LGV?"\u3002\u8f15\u578b\u8ca8\u8eca: "+c.LGV.vacancy:null," "]}),Object(u.jsxs)("p",{children:["\u3002\u66f4\u65b0\u6642\u9593:"," ",d]})]})})})};return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(z.a,{center:s,zoom:13,scrollWheelZoom:!1,children:[Object(u.jsx)(V.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t?t.results.map((function(e){return Object(u.jsx)("div",{children:v(e._id,e.lastUploadDate,e)})})):null,Object(u.jsx)(g,{})]})})},R={justifyContent:"center",alignItems:"center",textAlign:"center",marginTop:"4.7vh",fontSize:"1.7vh",fontStyle:"italic"},F=function(){return Object(u.jsxs)("div",{style:R,children:[Object(u.jsx)("a",{href:"https://data.gov.hk/en/",children:Object(u.jsxs)("p",{style:{color:"grey"},children:["Data@DATA.GOV.HK ","  "]})}),Object(u.jsx)("a",{href:"https://github.com/issacto",children:Object(u.jsx)("p",{style:{color:"grey",display:"inline"},children:"Copyright@IssacTo "})})]})},M=n.p+"static/media/icon.dbbd9805.svg",A=n(32),D=n.n(A),E={color:"white",fontFamily:"-apple-system, Roboto, sans-serif, serif",backgroundColor:"#29323c",height:"100%",minWidth:"99.5%",maxWidth:"99.5%",padding:5},_={display:"flex",justifyContent:"space-between",margin:"2vh"},I={backgroundColor:"#26323c",border:"1px solid cyan",borderRadius:"1vh",color:"aliceblue",fontSize:"3vh"},U={margin:"2vh",textAlign:"right",display:"flex",justifyContent:"space-between"},P={display:"flex",flexDirection:"row",border:"5px solid lightseagreen"},Z={width:"6vh",marginTop:"2.5vh",marginRight:"2.5vh"},J={minWidth:"70%",maxWidth:"70%",justifyContent:"center",marginTop:"auto",marginBottom:"auto"},K={minWidth:"30%",maxWidth:"30%",borderLeft:"3px solid lightseagreen",fontSize:"2.3vh",backgroundColor:"#20323c"},Y=function(){var e=Object(c.useState)({results:[]}),t=Object(d.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(""),s=Object(d.a)(i,2),a=s[0],h=s[1],p=Object(c.useState)(!1),b=Object(d.a)(p,2),g=b[0],v=b[1],O=Object(c.useState)([22.31833206,114.209832494]),x=Object(d.a)(O,2),f=x[0],y=x[1],m=Object(c.useState)(14),k=Object(d.a)(m,2),S=k[0],w=k[1],z=Object(c.useState)(!0),V=Object(d.a)(z,2),T=V[0],G=V[1];Object(c.useEffect)(Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j()("https://sps-opendata.pilotsmartke.gov.hk/rest/getCarparkVacancies");case 2:return t=e.sent,e.next=5,j()(" https://sps-opendata.pilotsmartke.gov.hk/rest/getCarparkInfos?lang=zh_TW");case 5:n=e.sent,h(n.data.results),r(t.data),v(!0);case 9:case"end":return e.stop()}}),e)}))),[]),Object(c.useEffect)((function(){setTimeout((function(){G(!T)}),4e3)}),[]);if("undefined"!==typeof window)return Object(u.jsxs)("div",{style:E,children:[Object(u.jsxs)("div",{style:_,children:[Object(u.jsx)("h1",{style:{fontSize:"4vh"},children:"\u4e5d\u9f8d\u897f\u505c\u8eca\u5834\u5373\u6642\u6578\u64da"}),Object(u.jsx)("div",{children:Object(u.jsx)("a",{href:"https://issacto.github.io/KowloonWestParking",children:Object(u.jsx)("img",{style:Z,src:M})})})]}),Object(u.jsx)(D.a,{active:T,spinner:!0,text:"\u8f09\u5165\u7db2\u7ad9\u4e2d",children:Object(u.jsxs)("div",{style:P,children:[Object(u.jsxs)("div",{style:J,children:[Object(u.jsx)(B,{data:n,zoom:S,detailsMap:a,center:f}),Object(u.jsxs)("div",{style:U,children:[Object(u.jsxs)("p",{style:{fontStyle:"italic",color:"grey"},children:["(lat: "+f[0]," long: "+f[1],",",S+") "]}),Object(u.jsx)("button",{style:I,onClick:function(){y([22.31833206,114.209832494]),w(14)},children:"\u5b8f\u89c0"})]})]}),g?Object(u.jsx)("div",{style:K,children:Object(u.jsx)(C,{data:n,detailsMap:a,changeCenter:y,changeZoom:w})}):null]})}),Object(u.jsx)(F,{})]})},q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,80)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),i(e),s(e)}))};s.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(Y,{})}),document.getElementById("root")),q()}},[[73,1,2]]]);
//# sourceMappingURL=main.c123ef66.chunk.js.map